{
  "hash": "219b96511a913ec153e73c19f7ff0a34",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Visualizing Trends\"\nauthor: \"Claus O. Wilke\"\ndate: last-modified\nformat: \n  revealjs:\n    theme:\n      - default\n      - Wilke-theme.scss\n    auto-stretch: false\n    chalkboard: true\nexecute:\n  fig-format: svg\n  fig-asp: 0.618\n  fig-width: 5.5\n---\n\n\n\n\n\n\n## We visualize linear trends with regression lines\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/blue-jays-scatter-1.svg){width=65%}\n:::\n:::\n\n\n\n\n## We visualize linear trends with regression lines\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/blue-jays-scatter-lm-1.svg){width=65%}\n:::\n:::\n\n\n\n\n## We visualize linear trends with regression lines\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/blue-jays-scatter-sex-1.svg){width=65%}\n:::\n:::\n\n\n\n\n\n## We visualize linear trends with regression lines\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/blue-jays-scatter-sex-line-1.svg){width=65%}\n:::\n:::\n\n\n\n\n## Exponential trends are linear trends on a log scale\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/biorxiv-nofit-1.svg){width=75%}\n:::\n:::\n\n\n\n\n## Exponential trends are linear trends on a log scale\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/biorxiv-expfit-1.svg){width=75%}\n:::\n:::\n\n\n\n\n## Exponential trends are linear trends on a log scale\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/biorxiv-expfit-logscale-1.svg){width=75%}\n:::\n:::\n\n\n\n\n## Exponential trends are linear trends on a log scale\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/biorxiv-logscale-1.svg){width=75%}\n:::\n:::\n\n\n\n\n## Exponential trends are linear trends on a log scale\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/biorxiv-logscale-doublefit-1.svg){width=75%}\n:::\n:::\n\n\n\n\n\n## Reminder: The Grammar-of-Graphics pipeline\n\n::: {.move-down-1em}\n![](../assets/general/grammar-of-graphics.svg){width=\"90%\" fig-align=\"center\"}\n:::\n\n::: {.small-font .move-up-1em}\nScale transformations are applied before statistical transformations\n:::\n\n# Detrending: Removing the underlying trend\n\n## Time series often show long-term persistent trends\n\n:::: {.fragment}\n\n::: {.small-font}\nHousing prices follow long-term exponential growth, overlaid with boom/bust cycles\n:::\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/hpi-trends-CA-1.svg){width=70%}\n:::\n:::\n\n\n\n\n::: {.absolute-bottom-right .tiny-font}\nHouse Price Index (HPI) for California. Source: Freddie Mac\n:::\n::::\n\n## Raw time series can be misleading\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/hpi-no-trendline-1.svg){width=65%}\n:::\n:::\n\n\n\n\n\n::: {.fragment .small-font .move-up-2em}\nDid housing prices in California decline substantially from 1990 to 1998?\n:::\n\n::: {.fragment .small-font}\nDid housing prices in West Virginia recover by 2020?\n:::\n\n::: {.absolute-bottom-right .tiny-font}\nUS States House Price Index (HPI). Source: Freddie Mac\n:::\n\n## Comparing the raw time series to the trendline helps\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/hpi-trends-1.svg){width=65%}\n:::\n:::\n\n\n\n\n::: {.small-font .move-up-2em}\nDid housing prices in California decline substantially from 1990 to 1998?\n:::\n\n::: {.small-font}\nDid housing prices in West Virginia recover by 2020?\n:::\n\n::: {.absolute-bottom-right .tiny-font}\nUS States House Price Index (HPI). Source: Freddie Mac\n:::\n\n## Even better: Remove underlying trend\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/hpi-detrended-1.svg){width=65%}\n:::\n:::\n\n\n\n\n::: {.small-font .move-up-2em}\nDid housing prices in California decline substantially from 1990 to 1998? — yes\n:::\n\n::: {.small-font}\nDid housing prices in West Virginia recover by 2020? — no\n:::\n\n::: {.absolute-bottom-right .tiny-font}\nUS States House Price Index (HPI). Source: Freddie Mac\n:::\n\n## Exponential versus linear de-trending\n\n::: {.small-font .fragment}\nTwo choices:\n:::\n\n::: {.small-font .incremental}\n- Fit linear trendline, remove by subtraction\n- Fit exponential trendline (linear in log space), remove by division\n:::\n\n::: {.small-font .fragment}\nIt is critical to make the correct choice for the dataset at hand\n:::\n\n::: {.small-font .fragment}\nAny type of growth or decay process (change is proportional to present value) **must** be analyzed in log space\n:::\n\n## Housing-price analysis in linear space looks wrong\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/hpi-trends-linear-1.svg){width=65%}\n:::\n:::\n\n\n\n\n::: {.absolute-bottom-right .tiny-font}\nUS States House Price Index (HPI). Source: Freddie Mac\n:::\n\n## Linear de-trending creates systematic deviations\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/hpi-trends-linear-detrended-1.svg){width=65%}\n:::\n:::\n\n\n\n\n::: {.absolute-bottom-right .tiny-font}\nUS States House Price Index (HPI). Source: Freddie Mac\n:::\n\n## Log-space de-trending one more time for comparison\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/hpi-detrended2-1.svg){width=65%}\n:::\n:::\n\n\n\n\n::: {.absolute-bottom-right .tiny-font}\nUS States House Price Index (HPI). Source: Freddie Mac\n:::\n\n# Accounting for seasonal fluctuations\n\n## Many time series show regular seasonal fluctuations\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/keeling-curve-1.svg){width=70%}\n:::\n:::\n\n\n\n\n::: {.absolute-bottom-right .tiny-font}\nCO<sub>2</sub> abundance in the atmosphere over time. Source: NOAA Global Monitoring Laboratory\n:::\n\n## Many time series show regular seasonal fluctuations\n\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/keeling-curve-zoomed-1.svg){width=70%}\n:::\n:::\n\n\n\n\n::: {.absolute-bottom-right .tiny-font}\nCO<sub>2</sub> abundance in the atmosphere over time. Source: NOAA Global Monitoring Laboratory\n:::\n\n## Seasonal Decomposition of Time Series by Loess (STL)\n\nWe can use STL to decompose a time series into:\n\n1. long-term trend\n\n2. seasonal effect\n\n3. remainder (noise)\n\n## {#keeling-curve-decomposition data-menu-title=\"Keeling curve decomposition\"}\n\n::: {.move-up-1em}\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/keeling-curve-decomposition-1.svg){width=100%}\n:::\n:::\n\n\n\n:::\n\n::: {.fragment .smaller-font .move-up-2em}\nMagnitude of remainder should be small compared to magnitude of seasonal fluctuations\n:::\n\n## {#keeling-curve-decomposition-zoomed data-menu-title=\"Keeling curve decomposition zoomed\"}\n\n::: {.move-up-1em}\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/keeling-curve-decomposition-zoomed-1.svg){width=100%}\n:::\n:::\n\n\n\n:::\n\n::: {.smaller-font .move-up-2em}\nMagnitude of remainder should be small compared to magnitude of seasonal fluctuations\n:::\n\n## Other strategies for adjusting for seasonality\n\n::: {.fragment .small-font}\nSimpler approaches:\n\n- Fit model with fixed or random effects for specific seasons\n:::\n\n::: {.fragment .small-font}\nMore complex approaches:\n\n- Perform Fourier or wavelet decomposition\n:::\n\n::: {.fragment .small-font}\nAll of these are beyond the scope of this class\n:::\n\n<!-- Segment ends here -->\n\n# Creating trendlines in **ggplot2**\n\n## Getting the data\n\n::: {.small-font}\nFirst dataset: `blue_jays`\n:::\n\n::: {.tiny-font}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nblue_jays <- read_csv(\"https://wilkelab.org/DSC385/datasets/blue_jays.csv\")\nblue_jays\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 123 × 8\n   bird_id    sex   bill_depth_mm bill_width_mm bill_length_mm head_length_mm\n   <chr>      <chr>         <dbl>         <dbl>          <dbl>          <dbl>\n 1 0000-00000 M              8.26          9.21           25.9           56.6\n 2 1142-05901 M              8.54          8.76           25.0           56.4\n 3 1142-05905 M              8.39          8.78           26.1           57.3\n 4 1142-05907 F              7.78          9.3            23.5           53.8\n 5 1142-05909 M              8.71          9.84           25.5           57.3\n 6 1142-05911 F              7.28          9.3            22.2           52.2\n 7 1142-05912 M              8.74          9.28           25.4           57.1\n 8 1142-05914 M              8.72          9.94           30             60.7\n 9 1142-05917 F              8.2           9.01           22.8           52.8\n10 1142-05920 F              7.67          9.31           24.6           54.9\n# ℹ 113 more rows\n# ℹ 2 more variables: body_mass_g <dbl>, skull_size_mm <dbl>\n```\n\n\n:::\n:::\n\n\n\n:::\n\n## Getting the data\n\n::: {.small-font}\nSecond dataset: `cars93`\n:::\n\n::: {.tiny-font}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncars93 <- read_csv(\"https://wilkelab.org/DSC385/datasets/cars93.csv\")\ncars93\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 93 × 27\n   Manufacturer Model      Type   Min.Price Price Max.Price MPG.city MPG.highway\n   <chr>        <chr>      <chr>      <dbl> <dbl>     <dbl>    <dbl>       <dbl>\n 1 Acura        Integra    Small       12.9  15.9      18.8       25          31\n 2 Acura        Legend     Midsi…      29.2  33.9      38.7       18          25\n 3 Audi         90         Compa…      25.9  29.1      32.3       20          26\n 4 Audi         100        Midsi…      30.8  37.7      44.6       19          26\n 5 BMW          535i       Midsi…      23.7  30        36.2       22          30\n 6 Buick        Century    Midsi…      14.2  15.7      17.3       22          31\n 7 Buick        LeSabre    Large       19.9  20.8      21.7       19          28\n 8 Buick        Roadmaster Large       22.6  23.7      24.9       16          25\n 9 Buick        Riviera    Midsi…      26.3  26.3      26.3       19          27\n10 Cadillac     DeVille    Large       33    34.7      36.3       16          25\n# ℹ 83 more rows\n# ℹ 19 more variables: AirBags <chr>, DriveTrain <chr>, Cylinders <chr>,\n#   EngineSize <dbl>, Horsepower <dbl>, RPM <dbl>, Rev.per.mile <dbl>,\n#   Man.trans.avail <chr>, Fuel.tank.capacity <dbl>, Passengers <dbl>,\n#   Length <dbl>, Wheelbase <dbl>, Width <dbl>, Turn.circle <dbl>,\n#   Rear.seat.room <dbl>, Luggage.room <dbl>, Weight <dbl>, Origin <chr>,\n#   Make <chr>\n```\n\n\n:::\n:::\n\n\n\n:::\n\n## We add trend lines with `geom_smooth()`\n\n::: {.tiny-font}\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nggplot(blue_jays) +\n  aes(body_mass_g, head_length_mm) + \n  geom_point() + \n  theme_bw()\n```\n\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/blue-jays-scatter-gg-1.svg){width=100%}\n:::\n:::\n\n\n\n:::\n\n::: {.small-font .move-up-1em}\nScatter plot only\n:::\n\n## We add trend lines with `geom_smooth()`\n\n::: {.tiny-font}\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nggplot(blue_jays) +\n  aes(body_mass_g, head_length_mm) + \n  geom_point() + \n  geom_smooth() +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/blue-jays-scatter-gg-smooth-1.svg){width=100%}\n:::\n:::\n\n\n\n:::\n\n::: {.small-font .move-up-1em}\nScatter plot with loess smooth\n:::\n\n## We add trend lines with `geom_smooth()`\n\n::: {.tiny-font}\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nggplot(blue_jays) +\n  aes(body_mass_g, head_length_mm) + \n  geom_point() + \n  geom_smooth(\n    # smooth using linear model\n    method = \"lm\"\n  ) +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/blue-jays-scatter-gg-lm-1.svg){width=100%}\n:::\n:::\n\n\n\n:::\n\n::: {.small-font .move-up-1em}\nScatter plot with linear regression\n:::\n\n## We add trend lines with `geom_smooth()`\n\n::: {.tiny-font}\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nggplot(blue_jays) +\n  aes(body_mass_g, head_length_mm) + \n  geom_point() + \n  geom_smooth(\n    # smooth using linear model\n    method = \"lm\",\n    # suppress confidence band\n    se = FALSE\n  ) +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/blue-jays-scatter-gg-lm-nose-1.svg){width=100%}\n:::\n:::\n\n\n\n:::\n\n::: {.small-font .move-up-1em}\nScatter plot with linear regression, no confidence band\n:::\n\n## We add trend lines with `geom_smooth()`\n\n::: {.tiny-font}\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nggplot(blue_jays) +\n  aes(\n    body_mass_g, head_length_mm,\n    color = sex\n  ) + \n  geom_point() + \n  geom_smooth(\n    # smooth using linear model\n    method = \"lm\",\n    # suppress confidence band\n    se = FALSE\n  ) +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/blue-jays-scatter-gg-sex-1.svg){width=100%}\n:::\n:::\n\n\n\n:::\n\n::: {.small-font .move-up-1em}\nScatter plot with linear regression by sex\n:::\n\n\n# Linear regression can be nonsensical\n\n## Example: Fuel-tank capacity versus price in cars\n\n::: {.tiny-font}\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nggplot(cars93) +\n  aes(x = Price, y = Fuel.tank.capacity) + \n  geom_point() + \n  geom_smooth(\n    # smooth using linear model\n    method = \"lm\",\n    # suppress confidence band\n    se = FALSE\n  ) +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/cars-lm-1.svg){width=100%}\n:::\n:::\n\n\n\n:::\n\n::: {.fragment .small-font .move-up-1em}\nDo more expensive cars have a larger fuel tank?\n:::\n\n## Example: Fuel-tank capacity versus price in cars\n\n::: {.tiny-font}\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nggplot(cars93) +\n  aes(x = Price, y = Fuel.tank.capacity) + \n  geom_point() +\n  # default: loess smoothing\n  geom_smooth(\n    se = FALSE\n  ) +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/cars-loess-1.svg){width=100%}\n:::\n:::\n\n\n\n:::\n\n## Example: Fuel-tank capacity versus price in cars\n\n::: {.tiny-font}\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nggplot(cars93) +\n  aes(x = Price, y = Fuel.tank.capacity) + \n  geom_point() +\n  # loess smoothing\n  geom_smooth(\n    se = FALSE,\n    method = \"loess\",\n    formula = y ~ x\n  ) +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/cars-loess2-1.svg){width=100%}\n:::\n:::\n\n\n\n:::\n\n::: {.fragment .small-font .move-up-1em}\nCaution: Exact shape of smoothing line depends on method details\n:::\n\n## Example: Fuel-tank capacity versus price in cars\n\n::: {.tiny-font}\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nggplot(cars93) +\n  aes(x = Price, y = Fuel.tank.capacity) + \n  geom_point() +\n  # loess smoothing\n  geom_smooth(\n    se = FALSE,\n    method = \"loess\",\n    formula = y ~ x,\n    span = 0.25\n  ) +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/cars-loess3-1.svg){width=100%}\n:::\n:::\n\n\n\n:::\n\n::: {.small-font .move-up-1em}\nCaution: Exact shape of smoothing line depends on method details\n:::\n\n## Example: Fuel-tank capacity versus price in cars\n\n::: {.tiny-font}\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nggplot(cars93) +\n  aes(x = Price, y = Fuel.tank.capacity) + \n  geom_point() +\n  # loess smoothing\n  geom_smooth(\n    se = FALSE,\n    method = \"loess\",\n    formula = y ~ x,\n    span = 0.75 # default value\n  ) +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/cars-loess4-1.svg){width=100%}\n:::\n:::\n\n\n\n:::\n\n::: {.small-font .move-up-1em}\nCaution: Exact shape of smoothing line depends on method details\n:::\n\n## Example: Fuel-tank capacity versus price in cars\n\n::: {.tiny-font}\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nggplot(cars93) +\n  aes(x = Price, y = Fuel.tank.capacity) + \n  geom_point() +\n  # loess smoothing\n  geom_smooth(\n    se = FALSE,\n    method = \"loess\",\n    formula = y ~ x,\n    span = 1.0\n  ) +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/cars-loess5-1.svg){width=100%}\n:::\n:::\n\n\n\n:::\n\n::: {.small-font .move-up-1em}\nCaution: Exact shape of smoothing line depends on method details\n:::\n\n## Example: Fuel-tank capacity versus price in cars\n\n::: {.tiny-font}\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nggplot(cars93) +\n  aes(x = Price, y = Fuel.tank.capacity) + \n  geom_point() +\n  # loess smoothing\n  geom_smooth(\n    se = FALSE,\n    method = \"loess\",\n    formula = y ~ x,\n    span = 1.5\n  ) +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/cars-loess6-1.svg){width=100%}\n:::\n:::\n\n\n\n:::\n\n::: {.small-font .move-up-1em}\nCaution: Exact shape of smoothing line depends on method details\n:::\n\n## Example: Fuel-tank capacity versus price in cars\n\n::: {.tiny-font}\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nggplot(cars93) +\n  aes(x = Price, y = Fuel.tank.capacity) + \n  geom_point() +\n  # cubic spline, 5 knots\n  geom_smooth(\n    se = FALSE,\n    method = \"gam\",\n    formula = y ~ s(x, k = 5, bs = 'cr')\n  ) +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/cars-gam-1.svg){width=100%}\n:::\n:::\n\n\n\n:::\n\n::: {.small-font .move-up-1em}\nCaution: Exact shape of smoothing line depends on method details\n:::\n\n## Example: Fuel-tank capacity versus price in cars\n\n::: {.tiny-font}\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nggplot(cars93) +\n  aes(x = Price, y = Fuel.tank.capacity) + \n  geom_point() +\n  # thin-plate spline, 3 knots\n  geom_smooth(\n    se = FALSE,\n    method = \"gam\",\n    formula = y ~ s(x, k = 3)\n  ) +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/cars-gam2-1.svg){width=100%}\n:::\n:::\n\n\n\n:::\n\n::: {.small-font .move-up-1em}\nCaution: Exact shape of smoothing line depends on method details\n:::\n\n## Example: Fuel-tank capacity versus price in cars\n\n::: {.tiny-font}\n\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\nggplot(cars93) +\n  aes(x = Price, y = Fuel.tank.capacity) + \n  geom_point() +\n  # Gaussian process spline, 6 knots\n  geom_smooth(\n    se = FALSE,\n    method = \"gam\",\n    formula = y ~ s(x, k = 6, bs = 'gp')\n  ) +\n  theme_bw()\n```\n\n::: {.cell-output-display}\n![&nbsp;](visualizing-trends_files/figure-revealjs/cars-gam3-1.svg){width=100%}\n:::\n:::\n\n\n\n:::\n\n::: {.small-font .move-up-1em}\nCaution: Exact shape of smoothing line depends on method details\n:::\n\n::: {.fragment .small-font}\nSmoothing lines are particularly unreliable near their endpoints\n:::\n\n<!-- Segment ends here -->\n\n## Further reading\n\n- Fundamentals of Data Visualization: [Chapter 14: Visualizing trends](https://clauswilke.com/dataviz/visualizing-trends.html)\n- Data Visualization—A Practical Introduction: [Chapter 6: Work with models](https://socviz.co/modeling.html)\n- **ggplot2** reference documentation: [`geom_smooth()`](https://ggplot2.tidyverse.org/reference/geom_smooth.html)\n- **mgcv** reference documentation (for gam smoothing): [pdf document](https://cran.r-project.org/web/packages/mgcv/mgcv.pdf)\n",
    "supporting": [
      "visualizing-trends_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}