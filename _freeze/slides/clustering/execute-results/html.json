{
  "hash": "8820cde56d7e5c4d8fb02731e0d29414",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Clustering\"\nauthor: \"Claus O. Wilke\"\ndate: last-modified\nformat: \n  revealjs:\n    theme:\n      - default\n      - Wilke-theme.scss\n    auto-stretch: false\n    chalkboard: true\nexecute:\n  fig-format: svg\n  fig-asp: 0.618\n  fig-width: 5.5\n---\n\n\n\n\n\n\n\n## {#kmeans-motivation data-menu-title=\"k-means motivation\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/three-clusters-viz-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nThese points correspond to three clusters. \nCan a computer find them automatically?\n:::\n\n## {#kmeans-motivation-color data-menu-title=\"k-means motivation colored\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/three-clusters-viz-color-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nThese points correspond to three clusters. \nCan a computer find them automatically?\n:::\n\n## *k*-means clustering\n\n::: {.fragment}\n1\\. Start with *k* randomly chosen means\n:::\n\n::: {.fragment}\n2\\. Color data points by the shortest distance to any\nmean\n:::\n\n::: {.fragment}\n3\\. Move means to centroid position of each group of\npoints\n:::\n\n::: {.fragment}\n4\\. Repeat from step 2 until convergence\n:::\n\n# Let's try it out\n\n## {#kmeans-animation-1 data-menu-title=\"k-means animation step 1\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/three-clusters-kmeans1-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n## {#kmeans-animation-2 data-menu-title=\"k-means animation step 2\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/three-clusters-kmeans2-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nAdd means at arbitrary locations\n:::\n\n## {#kmeans-animation-3 data-menu-title=\"k-means animation step 3\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/three-clusters-kmeans3-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nColor data points by the shortest distance to any mean\n:::\n\n## {#kmeans-animation-4 data-menu-title=\"k-means animation step 4\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/three-clusters-kmeans4-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nColor data points by the shortest distance to any mean\n:::\n\n## {#kmeans-animation-5 data-menu-title=\"k-means animation step 5\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/three-clusters-kmeans5-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nMove means to centroid position of each group of points\n:::\n\n## {#kmeans-animation-6 data-menu-title=\"k-means animation step 6\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/three-clusters-kmeans6-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nColor data points by the shortest distance to any mean\n:::\n\n## {#kmeans-animation-7 data-menu-title=\"k-means animation step 7\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/three-clusters-kmeans7-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nColor data points by the shortest distance to any mean\n:::\n\n## {#kmeans-animation-8 data-menu-title=\"k-means animation step 8\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/three-clusters-kmeans8-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nMove means to centroid position of each group of points\n:::\n\n## {#kmeans-animation-9 data-menu-title=\"k-means animation step 9\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/three-clusters-kmeans9-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nColor data points by the shortest distance to any mean\n:::\n\n## {#kmeans-animation-10 data-menu-title=\"k-means animation step 10\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/three-clusters-kmeans10-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nColor data points by the shortest distance to any mean\n:::\n\n## {#kmeans-animation-11 data-menu-title=\"k-means animation step 11\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/three-clusters-kmeans11-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nMove means to centroid position of each group of points\n:::\n\n## {#kmeans-animation-12 data-menu-title=\"k-means animation step 12\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/three-clusters-kmeans12-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nColor data points by the shortest distance to any mean\n:::\n\n## {#kmeans-animation-13 data-menu-title=\"k-means animation step 13\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/three-clusters-kmeans13-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nColor data points by the shortest distance to any mean\n:::\n\n## {#kmeans-animation-14 data-menu-title=\"k-means animation step 14\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/three-clusters-kmeans14-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nMove means to centroid position of each group of points\n:::\n\n## {#kmeans-animation-15 data-menu-title=\"k-means animation step 15\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/three-clusters-kmeans15-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nColor data points by the shortest distance to any mean\n:::\n\n## {#kmeans-animation-16 data-menu-title=\"k-means animation step 16\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/three-clusters-kmeans16-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nColor data points by the shortest distance to any mean\n:::\n\n## {#kmeans-animation-17 data-menu-title=\"k-means animation step 17\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/three-clusters-kmeans17-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nMove means to centroid position of each group of points\n:::\n\n## {#kmeans-animation-18 data-menu-title=\"k-means animation step 18\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/three-clusters-kmeans18-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nColor data points by the shortest distance to any mean\n:::\n\n## {#kmeans-animation-19 data-menu-title=\"k-means animation step 19\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/three-clusters-kmeans19-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nColor data points by the shortest distance to any mean\n:::\n\n## {#kmeans-animation-20 data-menu-title=\"k-means animation step 20\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/three-clusters-kmeans20-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nFinal result\n:::\n\n# Now we'll cluster the same dataset with five centroids\n\n## {#kmeans-five-clusters-1 data-menu-title=\"k-means five clusters step 1\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/five-clusters-kmeans1-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n## {#kmeans-five-clusters-2 data-menu-title=\"k-means five clusters step 2\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/five-clusters-kmeans2-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nAdd means at arbitrary locations\n:::\n\n## {#kmeans-five-clusters-3 data-menu-title=\"k-means five clusters step 3\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/five-clusters-kmeans3-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nColor data points by the shortest distance to any mean\n:::\n\n## {#kmeans-five-clusters-4 data-menu-title=\"k-means five clusters step 4\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/five-clusters-kmeans4-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nColor data points by the shortest distance to any mean\n:::\n\n## {#kmeans-five-clusters-5 data-menu-title=\"k-means five clusters step 5\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/five-clusters-kmeans5-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nMove means to centroid position of each group of points\n:::\n\n## {#kmeans-five-clusters-6 data-menu-title=\"k-means five clusters step 6\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/five-clusters-kmeans6-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nColor data points by the shortest distance to any mean\n:::\n\n## {#kmeans-five-clusters-7 data-menu-title=\"k-means five clusters step 7\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/five-clusters-kmeans7-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nColor data points by the shortest distance to any mean\n:::\n\n## {#kmeans-five-clusters-8 data-menu-title=\"k-means five clusters step 8\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/five-clusters-kmeans8-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nMove means to centroid position of each group of points\n:::\n\n## {#kmeans-five-clusters-9 data-menu-title=\"k-means five clusters step 9\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/five-clusters-kmeans9-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nColor data points by the shortest distance to any mean\n:::\n\n## {#kmeans-five-clusters-10 data-menu-title=\"k-means five clusters step 10\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/five-clusters-kmeans10-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nColor data points by the shortest distance to any mean\n:::\n\n## {#kmeans-five-clusters-11 data-menu-title=\"k-means five clusters step 11\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/five-clusters-kmeans11-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nMove means to centroid position of each group of points\n:::\n\n## {#kmeans-five-clusters-12 data-menu-title=\"k-means five clusters step 12\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/five-clusters-kmeans12-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nColor data points by the shortest distance to any mean\n:::\n\n## {#kmeans-five-clusters-13 data-menu-title=\"k-means five clusters step 13\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/five-clusters-kmeans13-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nColor data points by the shortest distance to any mean\n:::\n\n## {#kmeans-five-clusters-14 data-menu-title=\"k-means five clusters step 14\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/five-clusters-kmeans14-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nMove means to centroid position of each group of points\n:::\n\n## {#kmeans-five-clusters-15 data-menu-title=\"k-means five clusters step 15\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/five-clusters-kmeans15-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nColor data points by the shortest distance to any mean\n:::\n\n## {#kmeans-five-clusters-16 data-menu-title=\"k-means five clusters step 16\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/five-clusters-kmeans16-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nColor data points by the shortest distance to any mean\n:::\n\n## {#kmeans-five-clusters-17 data-menu-title=\"k-means five clusters step 17\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/five-clusters-kmeans17-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nMove means to centroid position of each group of points\n:::\n\n# ... do many more iterations ...\n\n## {#kmeans-five-clusters-18 data-menu-title=\"k-means five clusters step 18\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/five-clusters-kmeans18-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nFinal result\n:::\n\n# Now let's try the spirals dataset\n\n## {#kmeans-spirals-1 data-menu-title=\"k-means spirals step 1\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/spirals-kmeans1-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n## {#kmeans-spirals-2 data-menu-title=\"k-means spirals step 2\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/spirals-kmeans2-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nAdd means at arbitrary locations\n:::\n\n## {#kmeans-spirals-3 data-menu-title=\"k-means spirals step 3\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/spirals-kmeans3-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nColor data points by the shortest distance to any mean\n:::\n\n## {#kmeans-spirals-4 data-menu-title=\"k-means spirals step 4\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/spirals-kmeans4-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nColor data points by the shortest distance to any mean\n:::\n\n## {#kmeans-spirals-5 data-menu-title=\"k-means spirals step 5\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/spirals-kmeans5-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nMove means to centroid position of each group of points\n:::\n\n## {#kmeans-spirals-6 data-menu-title=\"k-means spirals step 6\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/spirals-kmeans6-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nColor data points by the shortest distance to any mean\n:::\n\n## {#kmeans-spirals-7 data-menu-title=\"k-means spirals step 7\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/spirals-kmeans7-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nColor data points by the shortest distance to any mean\n:::\n\n## {#kmeans-spirals-8 data-menu-title=\"k-means spirals step 8\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/spirals-kmeans8-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nMove means to centroid position of each group of points\n:::\n\n## {#kmeans-spirals-9 data-menu-title=\"k-means spirals step 9\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/spirals-kmeans9-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nColor data points by the shortest distance to any mean\n:::\n\n## {#kmeans-spirals-10 data-menu-title=\"k-means spirals step 10\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/spirals-kmeans10-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nColor data points by the shortest distance to any mean\n:::\n\n## {#kmeans-spirals-11 data-menu-title=\"k-means spirals step 11\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/spirals-kmeans11-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nMove means to centroid position of each group of points\n:::\n\n## {#kmeans-spirals-12 data-menu-title=\"k-means spirals step 12\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/spirals-kmeans12-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nColor data points by the shortest distance to any mean\n:::\n\n## {#kmeans-spirals-13 data-menu-title=\"k-means spirals step 13\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/spirals-kmeans13-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nColor data points by the shortest distance to any mean\n:::\n\n## {#kmeans-spirals-14 data-menu-title=\"k-means spirals step 14\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/spirals-kmeans14-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nMove means to centroid position of each group of points\n:::\n\n## {#kmeans-spirals-15 data-menu-title=\"k-means spirals step 15\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/spirals-kmeans15-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nColor data points by the shortest distance to any mean\n:::\n\n## {#kmeans-spirals-16 data-menu-title=\"k-means spirals step 16\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/spirals-kmeans16-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nColor data points by the shortest distance to any mean\n:::\n\n## {#kmeans-spirals-17 data-menu-title=\"k-means spirals step 17\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/spirals-kmeans17-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nMove means to centroid position of each group of points\n:::\n\n# ... do many more iterations ...\n\n## {#kmeans-spirals-18 data-menu-title=\"k-means spirals step 18\"}\n\n::: {.move-up-1em}\n\n\n::: {.cell}\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/spirals-kmeans18-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n::: {.small-font .move-up-2em}\nFinal result\n:::\n\n# k-means clustering works best when<br>data forms distinct, compact clusters\n\n## Other clustering algorithms\n\n::: {.move-up-half-em}\n![](../assets/clustering/clustering_examples.png){width=\"100%\" fig-align=\"center\"}\n:::\n\n::: {.absolute-bottom-right .tiny-font}\nFrom George Seif (2018) [The 5 Clustering Algorithms Data Scientists Need to Know](https://www.kdnuggets.com/2018/06/5-clustering-algorithms-data-scientists-need-know.html)\n:::\n\n<!-- Segment ends here -->\n\n# Doing k-means clustering in R\n\n## Example dataset: `iris`\n\n::: {.small-font}\nMeasurements on the sepals and petals of three iris species\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\niris\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species\n1            5.1         3.5          1.4         0.2     setosa\n2            4.9         3.0          1.4         0.2     setosa\n3            4.7         3.2          1.3         0.2     setosa\n4            4.6         3.1          1.5         0.2     setosa\n5            5.0         3.6          1.4         0.2     setosa\n6            5.4         3.9          1.7         0.4     setosa\n7            4.6         3.4          1.4         0.3     setosa\n8            5.0         3.4          1.5         0.2     setosa\n9            4.4         2.9          1.4         0.2     setosa\n10           4.9         3.1          1.5         0.1     setosa\n11           5.4         3.7          1.5         0.2     setosa\n12           4.8         3.4          1.6         0.2     setosa\n13           4.8         3.0          1.4         0.1     setosa\n14           4.3         3.0          1.1         0.1     setosa\n15           5.8         4.0          1.2         0.2     setosa\n16           5.7         4.4          1.5         0.4     setosa\n17           5.4         3.9          1.3         0.4     setosa\n18           5.1         3.5          1.4         0.3     setosa\n19           5.7         3.8          1.7         0.3     setosa\n20           5.1         3.8          1.5         0.3     setosa\n21           5.4         3.4          1.7         0.2     setosa\n22           5.1         3.7          1.5         0.4     setosa\n23           4.6         3.6          1.0         0.2     setosa\n24           5.1         3.3          1.7         0.5     setosa\n25           4.8         3.4          1.9         0.2     setosa\n26           5.0         3.0          1.6         0.2     setosa\n27           5.0         3.4          1.6         0.4     setosa\n28           5.2         3.5          1.5         0.2     setosa\n29           5.2         3.4          1.4         0.2     setosa\n30           4.7         3.2          1.6         0.2     setosa\n31           4.8         3.1          1.6         0.2     setosa\n32           5.4         3.4          1.5         0.4     setosa\n33           5.2         4.1          1.5         0.1     setosa\n34           5.5         4.2          1.4         0.2     setosa\n35           4.9         3.1          1.5         0.2     setosa\n36           5.0         3.2          1.2         0.2     setosa\n37           5.5         3.5          1.3         0.2     setosa\n38           4.9         3.6          1.4         0.1     setosa\n39           4.4         3.0          1.3         0.2     setosa\n40           5.1         3.4          1.5         0.2     setosa\n41           5.0         3.5          1.3         0.3     setosa\n42           4.5         2.3          1.3         0.3     setosa\n43           4.4         3.2          1.3         0.2     setosa\n44           5.0         3.5          1.6         0.6     setosa\n45           5.1         3.8          1.9         0.4     setosa\n46           4.8         3.0          1.4         0.3     setosa\n47           5.1         3.8          1.6         0.2     setosa\n48           4.6         3.2          1.4         0.2     setosa\n49           5.3         3.7          1.5         0.2     setosa\n50           5.0         3.3          1.4         0.2     setosa\n51           7.0         3.2          4.7         1.4 versicolor\n52           6.4         3.2          4.5         1.5 versicolor\n53           6.9         3.1          4.9         1.5 versicolor\n54           5.5         2.3          4.0         1.3 versicolor\n55           6.5         2.8          4.6         1.5 versicolor\n56           5.7         2.8          4.5         1.3 versicolor\n57           6.3         3.3          4.7         1.6 versicolor\n58           4.9         2.4          3.3         1.0 versicolor\n59           6.6         2.9          4.6         1.3 versicolor\n60           5.2         2.7          3.9         1.4 versicolor\n61           5.0         2.0          3.5         1.0 versicolor\n62           5.9         3.0          4.2         1.5 versicolor\n63           6.0         2.2          4.0         1.0 versicolor\n64           6.1         2.9          4.7         1.4 versicolor\n65           5.6         2.9          3.6         1.3 versicolor\n66           6.7         3.1          4.4         1.4 versicolor\n67           5.6         3.0          4.5         1.5 versicolor\n68           5.8         2.7          4.1         1.0 versicolor\n69           6.2         2.2          4.5         1.5 versicolor\n70           5.6         2.5          3.9         1.1 versicolor\n71           5.9         3.2          4.8         1.8 versicolor\n72           6.1         2.8          4.0         1.3 versicolor\n73           6.3         2.5          4.9         1.5 versicolor\n74           6.1         2.8          4.7         1.2 versicolor\n75           6.4         2.9          4.3         1.3 versicolor\n76           6.6         3.0          4.4         1.4 versicolor\n77           6.8         2.8          4.8         1.4 versicolor\n78           6.7         3.0          5.0         1.7 versicolor\n79           6.0         2.9          4.5         1.5 versicolor\n80           5.7         2.6          3.5         1.0 versicolor\n81           5.5         2.4          3.8         1.1 versicolor\n82           5.5         2.4          3.7         1.0 versicolor\n83           5.8         2.7          3.9         1.2 versicolor\n84           6.0         2.7          5.1         1.6 versicolor\n85           5.4         3.0          4.5         1.5 versicolor\n86           6.0         3.4          4.5         1.6 versicolor\n87           6.7         3.1          4.7         1.5 versicolor\n88           6.3         2.3          4.4         1.3 versicolor\n89           5.6         3.0          4.1         1.3 versicolor\n90           5.5         2.5          4.0         1.3 versicolor\n91           5.5         2.6          4.4         1.2 versicolor\n92           6.1         3.0          4.6         1.4 versicolor\n93           5.8         2.6          4.0         1.2 versicolor\n94           5.0         2.3          3.3         1.0 versicolor\n95           5.6         2.7          4.2         1.3 versicolor\n96           5.7         3.0          4.2         1.2 versicolor\n97           5.7         2.9          4.2         1.3 versicolor\n98           6.2         2.9          4.3         1.3 versicolor\n99           5.1         2.5          3.0         1.1 versicolor\n100          5.7         2.8          4.1         1.3 versicolor\n101          6.3         3.3          6.0         2.5  virginica\n102          5.8         2.7          5.1         1.9  virginica\n103          7.1         3.0          5.9         2.1  virginica\n104          6.3         2.9          5.6         1.8  virginica\n105          6.5         3.0          5.8         2.2  virginica\n106          7.6         3.0          6.6         2.1  virginica\n107          4.9         2.5          4.5         1.7  virginica\n108          7.3         2.9          6.3         1.8  virginica\n109          6.7         2.5          5.8         1.8  virginica\n110          7.2         3.6          6.1         2.5  virginica\n111          6.5         3.2          5.1         2.0  virginica\n112          6.4         2.7          5.3         1.9  virginica\n113          6.8         3.0          5.5         2.1  virginica\n114          5.7         2.5          5.0         2.0  virginica\n115          5.8         2.8          5.1         2.4  virginica\n116          6.4         3.2          5.3         2.3  virginica\n117          6.5         3.0          5.5         1.8  virginica\n118          7.7         3.8          6.7         2.2  virginica\n119          7.7         2.6          6.9         2.3  virginica\n120          6.0         2.2          5.0         1.5  virginica\n121          6.9         3.2          5.7         2.3  virginica\n122          5.6         2.8          4.9         2.0  virginica\n123          7.7         2.8          6.7         2.0  virginica\n124          6.3         2.7          4.9         1.8  virginica\n125          6.7         3.3          5.7         2.1  virginica\n126          7.2         3.2          6.0         1.8  virginica\n127          6.2         2.8          4.8         1.8  virginica\n128          6.1         3.0          4.9         1.8  virginica\n129          6.4         2.8          5.6         2.1  virginica\n130          7.2         3.0          5.8         1.6  virginica\n131          7.4         2.8          6.1         1.9  virginica\n132          7.9         3.8          6.4         2.0  virginica\n133          6.4         2.8          5.6         2.2  virginica\n134          6.3         2.8          5.1         1.5  virginica\n135          6.1         2.6          5.6         1.4  virginica\n136          7.7         3.0          6.1         2.3  virginica\n137          6.3         3.4          5.6         2.4  virginica\n138          6.4         3.1          5.5         1.8  virginica\n139          6.0         3.0          4.8         1.8  virginica\n140          6.9         3.1          5.4         2.1  virginica\n141          6.7         3.1          5.6         2.4  virginica\n142          6.9         3.1          5.1         2.3  virginica\n143          5.8         2.7          5.1         1.9  virginica\n144          6.8         3.2          5.9         2.3  virginica\n145          6.7         3.3          5.7         2.5  virginica\n146          6.7         3.0          5.2         2.3  virginica\n147          6.3         2.5          5.0         1.9  virginica\n148          6.5         3.0          5.2         2.0  virginica\n149          6.2         3.4          5.4         2.3  virginica\n150          5.9         3.0          5.1         1.8  virginica\n```\n\n\n:::\n:::\n\n\n:::\n\n## Example dataset: `iris`\n\n::: {.small-font}\nMeasurements on the sepals and petals of three iris species\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(iris, aes(Petal.Length, Petal.Width, color = Species)) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/iris-plot-1.svg){width=65%}\n:::\n:::\n\n\n:::\n\n## We perform k-means clustering with `kmeans()`\n\n::: {.tiny-font}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nkm_fit <- iris |> \n  select(where(is.numeric)) |>\n  kmeans(\n    centers = 3,  # number of cluster centers\n    nstart = 10   # number of independent restarts of the algorithm\n  )\n\nkm_fit\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nK-means clustering with 3 clusters of sizes 50, 38, 62\n\nCluster means:\n  Sepal.Length Sepal.Width Petal.Length Petal.Width\n1     5.006000    3.428000     1.462000    0.246000\n2     6.850000    3.073684     5.742105    2.071053\n3     5.901613    2.748387     4.393548    1.433871\n\nClustering vector:\n  [1] 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1\n [38] 1 1 1 1 1 1 1 1 1 1 1 1 1 3 3 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3\n [75] 3 3 3 2 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 2 3 2 2 2 2 3 2 2 2 2\n[112] 2 2 3 3 2 2 2 2 3 2 3 2 3 2 2 3 3 2 2 2 2 2 3 2 2 2 2 3 2 2 2 3 2 2 2 3 2\n[149] 2 3\n\nWithin cluster sum of squares by cluster:\n[1] 15.15100 23.87947 39.82097\n (between_SS / total_SS =  88.4 %)\n\nAvailable components:\n\n[1] \"cluster\"      \"centers\"      \"totss\"        \"withinss\"     \"tot.withinss\"\n[6] \"betweenss\"    \"size\"         \"iter\"         \"ifault\"      \n```\n\n\n:::\n:::\n\n\n:::\n\n## We perform k-means clustering with `kmeans()`\n\n::: {.tiny-font}\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\n# run kmeans clustering\nkm_fit <- iris |> \n  select(where(is.numeric)) |>\n  kmeans(centers = 3, nstart = 10)\n\n# plot\nkm_fit |>\n  # combine with original data\n  augment(iris) |>\n  ggplot() +\n  aes(x = Petal.Length, Petal.Width) +\n  geom_point( # points representing original data\n    aes(color = .cluster, shape = Species)\n  ) +\n  geom_point( # points representing centroids\n    data = tidy(km_fit),\n    aes(fill = cluster),\n    shape = 21, color = \"black\", size = 4\n  ) +\n  guides(color = \"none\")\n```\n\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/iris-kmeans-1.svg){width=100%}\n:::\n:::\n\n\n:::\n\n::: {.fragment .small-font}\nHow do we choose the number of clusters?\n:::\n\n## We perform k-means clustering with `kmeans()`\n\n::: {.tiny-font}\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\n# run kmeans clustering\nkm_fit <- iris |> \n  select(where(is.numeric)) |>\n  kmeans(centers = 2, nstart = 10)\n\n# plot\nkm_fit |>\n  # combine with original data\n  augment(iris) |>\n  ggplot() +\n  aes(x = Petal.Length, Petal.Width) +\n  geom_point( # points representing original data\n    aes(color = .cluster, shape = Species)\n  ) +\n  geom_point( # points representing centroids\n    data = tidy(km_fit),\n    aes(fill = cluster),\n    shape = 21, color = \"black\", size = 4\n  ) +\n  guides(color = \"none\")\n```\n\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/iris-kmeans2-1.svg){width=100%}\n:::\n:::\n\n\n:::\n\n::: {.small-font}\nHow do we choose the number of clusters?\n:::\n\n## We perform k-means clustering with `kmeans()`\n\n::: {.tiny-font}\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\n# run kmeans clustering\nkm_fit <- iris |> \n  select(where(is.numeric)) |>\n  kmeans(centers = 5, nstart = 10)\n\n# plot\nkm_fit |>\n  # combine with original data\n  augment(iris) |>\n  ggplot() +\n  aes(x = Petal.Length, Petal.Width) +\n  geom_point( # points representing original data\n    aes(color = .cluster, shape = Species)\n  ) +\n  geom_point( # points representing centroids\n    data = tidy(km_fit),\n    aes(fill = cluster),\n    shape = 21, color = \"black\", size = 4\n  ) +\n  guides(color = \"none\")\n```\n\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/iris-kmeans3-1.svg){width=100%}\n:::\n:::\n\n\n:::\n\n::: {.small-font}\nHow do we choose the number of clusters?\n:::\n\n## Look for elbow in scree plot\n\n::: {.tiny-font}\n\n\n::: {.cell output-location='column'}\n\n```{.r .cell-code}\n# function to calculate within sum squares\ncalc_withinss <- function(data, centers) {\n  km_fit <- select(data, where(is.numeric)) |>\n    kmeans(centers = centers, nstart = 10)\n  km_fit$tot.withinss\n}\n\ntibble(centers = 1:15) |>\n  mutate(\n    within_sum_squares = map_dbl(\n      centers, ~calc_withinss(iris, .x)\n    )\n  ) |>\n  ggplot() +\n  aes(centers, within_sum_squares) +\n  geom_point() +\n  geom_line()\n```\n\n::: {.cell-output-display}\n![&nbsp;](clustering_files/figure-revealjs/iris-scree-1.svg){width=100%}\n:::\n:::\n\n\n:::\n\n::: {.small-font}\nPlot suggests that around 3 clusters is the right choice\n:::\n\n<!-- Segment ends here -->\n\n## Further reading\n\n- Wikipedia: [k-means clustering](https://en.wikipedia.org/wiki/K-means_clustering)\n- Naftali Harris blog post: [Interactive k-means demonstration](https://www.naftaliharris.com/blog/visualizing-k-means-clustering/)\n- Stackoverflow post: [Determining the appropriate number of clusters in k-means](https://stackoverflow.com/questions/15376075/cluster-analysis-in-r-determine-the-optimal-number-of-clusters/15376462#15376462)\n- George Seif: [The 5 Clustering Algorithms Data Scientists Need to Know](https://www.kdnuggets.com/2018/06/5-clustering-algorithms-data-scientists-need-know.html)\n",
    "supporting": [
      "clustering_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}